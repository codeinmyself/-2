## 模板
```java
class CountIntervals {
    SegTree segTree = new SegTree();
    int n = (int)1e9+5;
    public CountIntervals() {

    }
    
    public void add(int left, int right) {
        segTree.add(segTree.root,1,n,left,right);
    }
    
    public int count() {
        return segTree.query(segTree.root,1,n);
    }
}


class Node {
    Node left,right;
    boolean lazy;
    int count;//当前节点中有效的整数个数

    public Node(){
        lazy = false;
        count = 0;
    }
}

class SegTree {
    Node root;
    public SegTree() {
        root = new Node();
    }

    void pushup(Node root){
        root.count = root.left.count + root.right.count;
    }

    void pushdown(Node root, int pl, int pr){
        int mid = pl + (pr - pl) / 2;
        if(root.left == null){
            root.left = new Node();
        }
        if(root.right == null){
            root.right = new Node();
        }
        if(root.lazy){
            root.left.lazy = true;
            root.left.count = mid - pl + 1;
            root.right.lazy = true;
            root.right.count = pr - mid;
            root.lazy = false;
        }
    }

    void add(Node root, int pl, int pr, int l, int r){
        if(root == null){
            root = new Node();
        }
        if(l <= pl && pr <= r){
            root.count = pr - pl + 1;
            root.lazy = true;
            return;
        }
        pushdown(root,pl,pr);
        int mid = pl + (pr - pl) / 2;
        if(l <= mid){
            add(root.left,pl,mid,l,r);
        }
        if(r > mid){
            add(root.right,mid+1,pr,l,r);
        }
        pushup(root);
    }

    int query(Node root, int pl, int pr){
        if(root == null){
            root = new Node();
        }
        return root.count;
    }
}
```
